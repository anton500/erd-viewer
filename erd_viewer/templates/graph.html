<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="static/js/svg-pan-zoom.min.js"></script>
    <script type="text/javascript">
        function gettables(opt) {
            var xhr = new XMLHttpRequest();
            xhr.responseType = 'json';
            xhr.open("POST", "/get_tables", true);
            xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');
            xhr.onload = function (e) {
                if (this.status == 200) {
                    select = document.getElementById("sel-tables")
                    select.length = 0
                    
                    for (table in this.response) {
                        option = document.createElement("option");
                        option.text = this.response[table];
                        option.value = this.response[table];
                        select.appendChild(option);
                    }
                }
            };
            xhr.send("schema=" + opt);
        }
    </script>
</head>

<body style="overflow: hidden; margin: 0px;">
    <div style="width: 100%; height: 100px; margin: 10px;">
        <h1>Demo for svg-pan-zoom: SVG in HTML 'object' element</h1>
            <select name="schemas" onchange="gettables(this.value)">
                {% for schema in schemas %}
                <option value="{{schema}}">{{schema}}</option>"
                {% endfor %}
            </select>
            <select name="tables" id='sel-tables'>
                {% for table in tables %}
                <option value="{{table}}">{{table}}</option>"
                {% endfor %}
            </select>
    </div>

    <object id="svg-graph" type="image/svg+xml" data="static/graphs/graph.gv.svg"
        style="width: 100%; height: 95vh; border-top:1px solid black"></object>
    <script>
        document.getElementById('svg-graph').addEventListener('load', function () {
            svgPanZoom(document.getElementById('svg-graph'), {
                controlIconsEnabled: true,
                zoomScaleSensitivity: 0.5
            });
        })
    </script>
</body>

</html>